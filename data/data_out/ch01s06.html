<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Не только CPython</title>
<link href="epub.css" rel="stylesheet" type="text/css"/>
<meta content="DocBook XSL Stylesheets V1.75.2" name="generator"/>
</head>
<body id="page">
<div class="section" title="Не только CPython">
<div class="titlepage">
<div>
<div><h1 class="title">Не только CPython</h1></div>
</div>
</div>
<p>Основная реализация Python написана на языке C и называется <span class="strong"><strong>CPython</strong></span> . Это тот, на который ссылается большинство людей, когда говорят о Python. Когда язык развивается, реализация C изменяется соответственно. Помимо C, Python доступен в нескольких других реализациях, которые пытаются не отставать от основного направления. Большинство из них - это несколько этапов развития CPython, но они предоставляют прекрасную возможность использовать и продвигать язык в конкретной среде.</p>
<div class="section" title="Почему это должно меня беспокоить?">
<div class="titlepage">
<div>
<div><h2 class="title">Почему это должно меня беспокоить?</h2></div>
</div>
</div>
<p>Доступно множество альтернативных реализаций Python. Страница Python Wiki по этой теме ( <a class="ulink" href="https://wiki.python.org/moin/PythonImplementations">https://wiki.python.org/moin/PythonImplementations</a>) включает более 20 различных языковых вариантов, диалектов или реализаций интерпретатора Python, построенного на чем-то другом, кроме C.Некоторые из них реализуют только подмножество синтаксиса основного языка, функций и встроенных расширений, но есть по крайней мере несколько которые почти полностью совместимы с CPython. Важнее всего знать, что, хотя некоторые из них являются просто игрушечными проектами или экспериментами, большинство из них были созданы для решения некоторых реальных проблем - проблем, которые либо невозможно было решить с помощью CPython, либо требовалось слишком много усилий разработчика. Примеры таких проблем:</p>
<div class="itemizedlist">
<ul class="itemizedlist">
<li class="listitem" style="list-style-type: disc">Запуск кода Python во встроенных системах</li>
<li class="listitem" style="list-style-type: disc">Интеграция с кодом, написанным для сред выполнения, таких как Java или .NET, или на разных языках
                </li>
<li class="listitem" style="list-style-type: disc">Запуск кода Python в веб-браузерах</li>
</ul>
</div>
<p>В этом разделе представлено краткое описание субъективно наиболее популярных и актуальных вариантов, доступных в настоящее время программистам на Python.</p></div>
<div class="section" title="Безстековый Python">
<div class="titlepage">
<div>
<div><h2 class="title">Безстековый Python</h2></div>
</div>
</div>
<p>Stackless Python рекламирует себя как улучшенную версию Python. Stackless назван так, потому что он избегает зависимости от стека вызовов C для своего собственного стека. Фактически это модифицированный код CPython, который также добавляет некоторые новые функции, которые отсутствовали в основной реализации Python во время создания Stackless. Наиболее важными из них являются микропотоки, управляемые интерпретатором как дешевая и легкая альтернатива обычным потокам, которые должны зависеть от переключения контекста ядра системы и планирования задач.</p>
<p>Последними доступными версиями являются 2.7.9 и 3.3.5, которые реализуют версии Python 2.7 и 3.3 соответственно. Все дополнительные функции, предоставляемые Stackless, представлены в рамках этого дистрибутива через встроенный <code class="literal">stackless</code>модуль.</p>
<p>Stackless - не самая популярная альтернативная реализация Python, но ее стоит знать, потому что идеи, представленные в ней, оказали сильное влияние на языковое сообщество. Основные функции переключения были извлечены из Stackless и опубликованы в виде независимого пакета с именем <code class="literal">greenlet</code>, который теперь является основой для многих полезных библиотек и фреймворков. Кроме того, большинство его функций было повторно реализовано в PyPy - другой реализации Python, которая будет представлена ​​позже. См. <a class="ulink" href="http://stackless.readthedocs.org/">Http://stackless.readthedocs.org/</a> .
        </p></div>
<div class="section" title="Jython">
<div class="titlepage">
<div>
<div><h2 class="title">Jython</h2></div>
</div>
</div>
<p>Jython - это реализация языка Java. Он компилирует код в байт-код Java и позволяет разработчикам легко использовать классы Java в своих модулях Python. Jython позволяет людям использовать Python в качестве языка сценариев верхнего уровня в сложных прикладных системах, например J2EE. Он также переносит приложения Java в мир Python. Создание Apache Jackrabbit (который представляет собой API репозитория документов на основе JCR; см. <a class="ulink" href="http://jackrabbit.apache.org">Http://jackrabbit.apache.org</a> ) доступным в программе Python - хороший пример того, что позволяет Jython.</p>
<p>Последней доступной версией Jython является Jython 2.7, что соответствует версии языка 2.7. Он рекламируется как реализующий почти всю базовую стандартную библиотеку Python и использует тот же набор регрессионных тестов. Версия Jython 3.x находится в стадии разработки.</p>
<p>Основные отличия Jython от реализации CPython:</p>
<div class="itemizedlist">
<ul class="itemizedlist">
<li class="listitem" style="list-style-type: disc">Истинная сборка мусора Java вместо подсчета ссылок
                </li>
<li class="listitem" style="list-style-type: disc">Отсутствие <span class="strong"><strong>GIL</strong></span> 
                    ( <span class="strong"><strong>глобальная блокировка интерпретатора</strong></span> ) позволяет лучше использовать несколько ядер в многопоточных приложениях.
                </li>
</ul>
</div>
<p>Основная слабость этой реализации языка - отсутствие поддержки API-интерфейсов расширений Python для C, поэтому никакие расширения Python, написанные на C, не будут работать с Jython. Это может измениться в будущем, поскольку есть планы по поддержке C Python Extension API в Jython 3.x.</p>
<p>Известно, что некоторые веб-фреймворки Python, такие как Pylons, ускоряют разработку Jython, чтобы сделать его доступным в мире Java. См. <a class="ulink" href="http://www.jython.org">Http://www.jython.org</a> .</p>
</div>
<div class="section" title="IronPython">
<div class="titlepage">
<div>
<div><h2 class="title">IronPython</h2></div>
</div>
</div>
<p>IronPython вводит Python в .NET Framework. Проект поддерживается Microsoft, где работают ведущие разработчики IronPython. Это довольно важная реализация для продвижения языка. Помимо Java, сообщество .NET является одним из крупнейших сообществ разработчиков. Также стоит отметить, что Microsoft предоставляет набор бесплатных инструментов разработки, которые превращают Visual Studio в полноценную Python IDE. Он распространяется в виде подключаемых <span class="strong"><strong>модулей</strong></span> Visual Studio с именем <span class="strong"><strong>PVTS</strong></span> ( <span class="strong"><strong>Python Tools для </strong></span>
<span class="strong"><strong>Visual Studio</strong></span> ) и доступен в виде открытого исходного кода на GitHub ( <a class="ulink" href="http://microsoft.github.io/PTVS">http://microsoft.github.io/PTVS</a> ).</p>
<p>Последний стабильный выпуск - 2.7.5, он совместим с Python 2.7. Как и в случае с Jython, существует некоторая разработка вокруг реализации Python 3.x, но стабильной версии пока нет. Несмотря на то, что .NET работает в основном в Microsoft Windows, IronPython можно запускать также в Mac OS X и Linux. Это благодаря Mono, кроссплатформенной реализации .NET с открытым исходным кодом.</p>
<p>Основные отличия или преимущества IronPython по сравнению с CPython заключаются в следующем:</p>
<div class="itemizedlist">
<ul class="itemizedlist">
<li class="listitem" style="list-style-type: disc">Подобно Jython, отсутствие GIL (глобальная блокировка интерпретатора) позволяет лучше использовать несколько ядер в многопоточных приложениях.
                </li>
<li class="listitem" style="list-style-type: disc">Код, написанный на C # и других языках .NET, можно легко интегрировать в IronPython и наоборот.
                </li>
<li class="listitem" style="list-style-type: disc">Может быть запущен во всех основных веб-браузерах через Silverlight
                </li>
</ul>
</div>
<p>Говоря о слабостях, IronPython снова кажется очень похожим на Jython, поскольку он не поддерживает API-интерфейсы C Python Extension. Это важно для разработчиков, которые хотели бы использовать такие пакеты, как numpy, которые в значительной степени основаны на расширениях C. Существует проект под названием ironclad (см. <a class="ulink" href="https://github.com/IronLanguages/ironclad">Https://github.com/IronLanguages/ironclad</a> ), цель которого - обеспечить беспрепятственное использование таких расширений с IronPython, хотя его последний известный поддерживаемый выпуск - 2.6, и разработка, похоже, на этом остановилась. См. <a class="ulink" href="http://ironpython.net/">Http://ironpython.net/</a> .
        </p></div>
<div class="section" title="PyPy">
<div class="titlepage">
<div>
<div><h2 class="title">PyPy</h2></div>
</div>
</div>
<p>PyPy, вероятно, самая захватывающая реализация, поскольку ее цель - переписать Python на Python. В PyPy интерпретатор Python сам написан на Python. У нас есть слой кода C, выполняющий все основные шаги для реализации Python в CPython. Однако в реализации PyPy этот слой кода C переписан на чистый Python.</p>
<p>Это означает, что вы можете изменить поведение интерпретатора во время выполнения и реализовать шаблоны кода, которые нелегко сделать в CPython.</p>
<p>PyPy в настоящее время стремится быть полностью совместимым с Python 2.7, а PyPy3 совместим с версией Python 3.2.5.</p>
<p>В прошлом PyPy был интересен в основном по теоретическим соображениям и интересовал тех, кто любил углубляться в детали языка. Обычно он не использовался в производстве, но с годами ситуация изменилась. В настоящее время многие тесты показывают, что на удивление PyPy часто намного быстрее, чем реализация CPython. У этого проекта есть собственный сайт тестирования, на котором отслеживается производительность каждой версии, измеренная с использованием десятков различных тестов (см. <a class="ulink" href="http://speed.pypy.org/">Http://speed.pypy.org/</a> ). Это ясно показывает, что PyPy с включенным JIT как минимум в несколько раз быстрее CPython. Эта и другие особенности PyPy заставляют все больше и больше разработчиков переходить на PyPy в своих производственных средах.
        </p>
<p>Основные отличия PyPy от реализации CPython:</p>
<div class="itemizedlist">
<ul class="itemizedlist">
<li class="listitem" style="list-style-type: disc">Сборка мусора используется вместо подсчета ссылок
                </li>
<li class="listitem" style="list-style-type: disc">Интегрированный JIT-компилятор трассировки, позволяющий значительно повысить производительность
                </li>
<li class="listitem" style="list-style-type: disc">Функции Stackless на уровне приложений заимствованы из Stackless Python.
                </li>
</ul>
</div>
<p>Как и почти любая другая альтернативная реализация Python, PyPy не имеет полной официальной поддержки C Python Extension API. Тем не менее он, по крайней мере, обеспечивает некоторую поддержку расширений C через свою подсистему CPyExt, хотя он плохо документирован и все еще не завершен. Кроме того, сообщество постоянно работает над переносом NumPy на PyPy, поскольку это наиболее востребованная функция. См. <a class="ulink" href="http://pypy.org">Http://pypy.org</a> .</p></div>
</div>
</body></html>
